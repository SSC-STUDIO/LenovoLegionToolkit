<wpfui:UiPage
    x:Class="LenovoLegionToolkit.Plugins.DockLauncher.DockLauncherPage"
    x:Name="PageRoot"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:plugin="clr-namespace:LenovoLegionToolkit.Plugins.DockLauncher"
    UseLayoutRounding="True"
    SnapsToDevicePixels="True"
    Scrollable="True"
    Loaded="Page_Loaded">
    
    <ScrollViewer
        VerticalScrollBarVisibility="Auto"
        HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="0,16,0,0">
            
            <!-- Header -->
            <StackPanel Margin="0,0,0,28">
                <TextBlock
                    FontSize="28"
                    FontWeight="Medium"
                    Text="{x:Static plugin:Resource.DockLauncher_PageTitle}" />
                <TextBlock
                    Margin="0,6,0,0"
                    FontSize="14"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    TextWrapping="Wrap"
                    Text="{x:Static plugin:Resource.DockLauncher_PageDescription}"
                    LineHeight="20" />
            </StackPanel>
            
            <!-- Enable Dock -->
            <Border
                Background="{DynamicResource ControlFillColorDefaultBrush}"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="24"
                Margin="0,0,0,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0">
                        <TextBlock
                            FontSize="17"
                            FontWeight="Medium"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Text="{x:Static plugin:Resource.DockLauncher_EnableDock}" />
                        <TextBlock
                            Margin="0,4,0,0"
                            FontSize="13"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            TextWrapping="Wrap"
                            Text="{x:Static plugin:Resource.DockLauncher_EnableDockDescription}" />
                    </StackPanel>
                    
                    <wpfui:ToggleSwitch
                        Grid.Column="1"
                        x:Name="_enableDockToggle"
                        IsChecked="{Binding IsEnabled, Mode=TwoWay}"
                        Click="EnableDockToggle_Click"
                        VerticalAlignment="Center" />
                </Grid>
            </Border>
            
            <!-- Quick Actions -->
            <Border
                Background="{DynamicResource ControlFillColorDefaultBrush}"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="24"
                Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock
                        FontSize="17"
                        FontWeight="Medium"
                        Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                        Text="快速操作"
                        Margin="0,0,0,12" />
                    
                    <StackPanel Orientation="Horizontal">
                        <wpfui:Button
                            x:Name="_forceShowButton"
                            Content="强制显示 Dock"
                            Click="ForceShowButton_Click"
                            Padding="12,6"
                            Margin="0,0,8,0" />
                        
                        <wpfui:Button
                            x:Name="_alwaysShowButton"
                            Content="一直显示（禁用自动隐藏）"
                            Click="AlwaysShowButton_Click"
                            Padding="12,6"
                            Margin="0,0,8,0" />
                        
                        <wpfui:Button
                            x:Name="_refreshDockButton"
                            Content="刷新 Dock"
                            Click="RefreshDockButton_Click"
                            Padding="12,6" />
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Applications List -->
            <Border
                Background="{DynamicResource ControlFillColorDefaultBrush}"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="24"
                Margin="0,0,0,20">
                <StackPanel>
                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock
                            Grid.Column="0"
                            FontSize="17"
                            FontWeight="Medium"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Text="{x:Static plugin:Resource.DockLauncher_Applications}" />
                        
                        <wpfui:Button
                            Grid.Column="1"
                            x:Name="_addApplicationButton"
                            Content="{x:Static plugin:Resource.DockLauncher_AddApplication}"
                            Click="AddApplicationButton_Click" />
                    </Grid>
                    
                    <ItemsControl
                        x:Name="_applicationsItemsControl"
                        ItemsSource="{Binding DockItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border
                                    Background="{DynamicResource ControlFillColorSecondaryBrush}"
                                    CornerRadius="8"
                                    Padding="12"
                                    Margin="0,0,0,8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <Image
                                            Grid.Column="0"
                                            Source="{Binding Icon}"
                                            Width="32"
                                            Height="32"
                                            Margin="0,0,12,0" />
                                        
                                        <TextBlock
                                            Grid.Column="1"
                                            Text="{Binding Name}"
                                            VerticalAlignment="Center"
                                            FontSize="14" />
                                        
                                        <wpfui:Button
                                            Grid.Column="2"
                                            Content="{x:Static plugin:Resource.DockLauncher_RemoveApplication}"
                                            Click="RemoveApplicationButton_Click"
                                            Tag="{Binding}"
                                            Padding="8,4" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <TextBlock
                        x:Name="_noApplicationsTextBlock"
                        Text="{x:Static plugin:Resource.DockLauncher_NoApplications}"
                        FontSize="14"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        HorizontalAlignment="Center"
                        Margin="0,16,0,0"
                        Visibility="Collapsed" />
                </StackPanel>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
</wpfui:UiPage>

