<Window
    x:Class="LenovoLegionToolkit.Plugins.DockLauncher.DockWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Dock Launcher"
    WindowStyle="None"
    AllowsTransparency="True"
    Background="Transparent"
    ShowInTaskbar="True"
    Topmost="True"
    ResizeMode="NoResize"
    SizeToContent="Width"
    MinWidth="200"
    Height="80"
    Visibility="Visible"
    Opacity="1"
    WindowStartupLocation="Manual"
    ClipToBounds="False"
    MouseEnter="Window_MouseEnter"
    MouseLeave="Window_MouseLeave"
    MouseMove="Window_MouseMove"
    Deactivated="Window_Deactivated">
    <Window.Resources>
        <!-- Initial entrance animation - slide up from bottom -->
        <Storyboard x:Key="EntranceAnimation">
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                From="100"
                To="0"
                Duration="0:0:0.5">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation
                Storyboard.TargetProperty="Opacity"
                From="0"
                To="1"
                Duration="0:0:0.5">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation
                Storyboard.TargetName="_dockBorder"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                From="0.8"
                To="1.0"
                Duration="0:0:0.5">
                <DoubleAnimation.EasingFunction>
                    <ElasticEase EasingMode="EaseOut" Oscillations="1" Springiness="3" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        
        <!-- Show animation for auto-hide -->
        <Storyboard x:Key="ShowAnimation">
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                From="80"
                To="0"
                Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation
                Storyboard.TargetProperty="Opacity"
                From="0"
                To="1"
                Duration="0:0:0.3" />
        </Storyboard>
        
        <!-- Hide animation for auto-hide -->
        <Storyboard x:Key="HideAnimation">
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                From="0"
                To="80"
                Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation
                Storyboard.TargetProperty="Opacity"
                From="1"
                To="0"
                Duration="0:0:0.3" />
        </Storyboard>
    </Window.Resources>
    <Window.RenderTransform>
        <TranslateTransform />
    </Window.RenderTransform>
    
    <Border
        x:Name="_dockBorder"
        CornerRadius="16"
        BorderThickness="1"
        Padding="12,8"
        ClipToBounds="False"
        RenderTransformOrigin="0.5,0.5">
        <Border.RenderTransform>
            <ScaleTransform ScaleX="1.0" ScaleY="1.0" />
        </Border.RenderTransform>
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#E0F0F0F0" Offset="0" />
                <GradientStop Color="#D0E0E0E0" Offset="1" />
            </LinearGradientBrush>
        </Border.Background>
        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#40FFFFFF" Offset="0" />
                <GradientStop Color="#20FFFFFF" Offset="1" />
            </LinearGradientBrush>
        </Border.BorderBrush>
        <Border.Effect>
            <DropShadowEffect
                Color="Black"
                Direction="270"
                ShadowDepth="8"
                Opacity="0.4"
                BlurRadius="20" />
        </Border.Effect>
        
        <Grid>
            <ItemsControl
                x:Name="_dockItemsControl"
                HorizontalAlignment="Center"
                ClipToBounds="False">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" ClipToBounds="False" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ContentControl Content="{Binding}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            
            <!-- Placeholder when no items -->
            <TextBlock
                x:Name="_noItemsPlaceholder"
                Text="No applications added"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                FontSize="12"
                Visibility="Collapsed" />
        </Grid>
    </Border>
</Window>

