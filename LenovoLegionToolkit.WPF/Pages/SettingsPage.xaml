<wpfui:UiPage
    x:Class="LenovoLegionToolkit.WPF.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:LenovoLegionToolkit.WPF.Controls"
    xmlns:settings="clr-namespace:LenovoLegionToolkit.WPF.Controls.Settings"
    xmlns:resources="clr-namespace:LenovoLegionToolkit.WPF.Resources"
    xmlns:utils="clr-namespace:LenovoLegionToolkit.WPF.Utils"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="{x:Static resources:Resource.SettingsPage_Title}"
    FlowDirection="{x:Static utils:LocalizationHelper.Direction}"
    Scrollable="False">

    <wpfui:UiPage.Resources>
        <Storyboard x:Key="ContentTransitionAnimation">
            <DoubleAnimation
                Storyboard.TargetName="_contentControl"
                Storyboard.TargetProperty="Opacity"
                From="{StaticResource AnimationOpacityStart}"
                To="{StaticResource AnimationOpacityEnd}"
                Duration="{StaticResource AnimationDurationMedium}"
                EasingFunction="{StaticResource AnimationEasingCubicOut}" />
            <DoubleAnimation
                Storyboard.TargetName="_contentControl"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                From="{StaticResource AnimationTranslationOffset}"
                To="0"
                Duration="{StaticResource AnimationDurationMedium}"
                EasingFunction="{StaticResource AnimationEasingCubicOut}" />
        </Storyboard>
    </wpfui:UiPage.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Header -->
        <StackPanel
            Grid.Row="0"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="0,0,16,24">
            <TextBlock
                Margin="0,16,0,8"
                FontSize="24"
                FontWeight="Medium"
                Text="{x:Static resources:Resource.SettingsPage_Title}" />
            <TextBlock
                Margin="0,0,0,0"
                FontSize="14"
                Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                Text="{x:Static resources:Resource.SettingsPage_Description}"
                TextWrapping="Wrap" />
        </StackPanel>

        <!-- Left Navigation Bar -->
        <Border
            Grid.Row="1"
            Grid.Column="0"
            Background="{DynamicResource PageBackgroundFillColorDefaultBrush}"
            BorderBrush="Transparent"
            BorderThickness="0">
       
            <ListBox
                x:Name="_navigationListBox"
                BorderThickness="0"
                Background="Transparent"
                Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                SelectionChanged="NavigationListBox_SelectionChanged"
                SelectedIndex="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                            <wpfui:SymbolIcon
                                FontSize="18"
                                Symbol="{Binding Icon}"
                                Margin="0,0,12,0"
                                VerticalAlignment="Center" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="14"
                                Text="{Binding Title}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="Margin" Value="0,0,0,2" />
                        <Setter Property="Cursor" Value="Hand" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListBoxItem">
                                    <Border
                                        x:Name="Bd"
                                        Background="{TemplateBinding Background}"
                                        BorderThickness="0"
                                        Padding="16,12,12,12"
                                        CornerRadius="8">
                                        <Grid>
                                            <!-- Blue indicator rectangle - matches main navigation bar style -->
                                            <Rectangle
                                                x:Name="ActiveRectangle"
                                                Width="4"
                                                Height="24"
                                                Margin="-16,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Opacity="0.0"
                                                RadiusX="2"
                                                RadiusY="2">
                                                <Rectangle.Fill>
                                                    <SolidColorBrush Color="{DynamicResource SystemAccentColorSecondary}" />
                                                </Rectangle.Fill>
                                            </Rectangle>
                                            <ContentPresenter
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                        </Grid>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Trigger.EnterActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation
                                                            Storyboard.TargetName="ActiveRectangle"
                                                            Storyboard.TargetProperty="Opacity"
                                                            To="1.0"
                                                            Duration="{StaticResource AnimationDurationFast}"
                                                            EasingFunction="{StaticResource AnimationEasingCubicOut}" />
                                                        <ColorAnimation
                                                            Storyboard.TargetName="Bd"
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#26000000"
                                                            Duration="{StaticResource AnimationDurationFast}"
                                                            EasingFunction="{StaticResource AnimationEasingCubicOut}" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.EnterActions>
                                            <Trigger.ExitActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation
                                                            Storyboard.TargetName="ActiveRectangle"
                                                            Storyboard.TargetProperty="Opacity"
                                                            To="0.0"
                                                            Duration="{StaticResource AnimationDurationFast}"
                                                            EasingFunction="{StaticResource AnimationEasingCubicOut}" />
                                                        <ColorAnimation
                                                            Storyboard.TargetName="Bd"
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="Transparent"
                                                            Duration="{StaticResource AnimationDurationFast}"
                                                            EasingFunction="{StaticResource AnimationEasingCubicOut}" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.ExitActions>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.EnterActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ColorAnimation
                                                            Storyboard.TargetName="Bd"
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#26000000"
                                                            Duration="{StaticResource AnimationDurationFast}"
                                                            EasingFunction="{StaticResource AnimationEasingCubicOut}" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.EnterActions>
                                            <Trigger.ExitActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ColorAnimation
                                                            Storyboard.TargetName="Bd"
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="Transparent"
                                                            Duration="{StaticResource AnimationDurationFast}"
                                                            EasingFunction="{StaticResource AnimationEasingCubicOut}" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.ExitActions>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>
        </Border>

        <!-- Right Content Area -->
        <ContentControl
            x:Name="_contentControl"
            Grid.Row="1"
            Grid.Column="1"
            Margin="24,0,0,0">
            <ContentControl.RenderTransform>
                <TranslateTransform />
            </ContentControl.RenderTransform>
        </ContentControl>
    </Grid>
</wpfui:UiPage>
