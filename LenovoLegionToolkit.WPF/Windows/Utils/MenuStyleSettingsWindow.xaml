<wpfui:UiWindow
    x:Class="LenovoLegionToolkit.WPF.Windows.Utils.MenuStyleSettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:resources="clr-namespace:LenovoLegionToolkit.WPF.Resources"
    Title="{x:Static resources:Resource.SystemBeautification_MenuStyleSettings_Title}"
    Height="600"
    Width="800"
    WindowStartupLocation="CenterOwner"
    ResizeMode="CanResize"
    Background="{DynamicResource ApplicationBackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Instructions -->
        <wpfui:CardControl Grid.Row="0" Margin="20,20,20,12">
            <wpfui:CardControl.Header>
                <TextBlock
                    FontSize="16"
                    FontWeight="Medium"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="使用说明" />
            </wpfui:CardControl.Header>
            <StackPanel Margin="0,8,0,0">
                <TextBlock
                    FontSize="13"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    TextWrapping="Wrap"
                    LineHeight="20"
                    Margin="0,0,0,8">
                    <Run Text="此编辑器用于直接编辑 shell.nss 配置文件。修改后点击" />
                    <Run Text="保存" FontWeight="Bold" />
                    <Run Text="按钮将更改写入文件。" />
                </TextBlock>
                <TextBlock
                    FontSize="13"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    TextWrapping="Wrap"
                    LineHeight="20"
                    Margin="0,0,0,8">
                    <Run Text="• 配置文件路径：" FontWeight="Bold" />
                    <Run x:Name="_configPathTextBlock" />
                </TextBlock>
                <TextBlock
                    FontSize="13"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    TextWrapping="Wrap"
                    LineHeight="20">
                    <Run Text="• 修改配置后，需要重启资源管理器（Explorer）才能生效。" />
                </TextBlock>
            </StackPanel>
        </wpfui:CardControl>

        <!-- Text Editor with Tabs -->
        <wpfui:CardControl Grid.Row="1" Margin="20,0,20,12">
            <wpfui:CardControl.Header>
                <TextBlock
                    FontSize="16"
                    FontWeight="Medium"
                    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                    Text="配置文件编辑器" />
            </wpfui:CardControl.Header>
            <TabControl
                x:Name="_configTabControl"
                Margin="0,8,0,0"
                SelectionChanged="ConfigTabControl_SelectionChanged">
                <TabItem Header="shell.nss">
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Auto">
                        <TextBox
                            x:Name="_shellNssTextBox"
                            FontFamily="Consolas, Courier New"
                            FontSize="12"
                            AcceptsReturn="True"
                            AcceptsTab="True"
                            TextWrapping="NoWrap"
                            VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Auto"
                            MinHeight="400"
                            Background="{DynamicResource ControlFillColorDefaultBrush}"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="8" />
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="theme.nss">
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Auto">
                        <TextBox
                            x:Name="_themeNssTextBox"
                            FontFamily="Consolas, Courier New"
                            FontSize="12"
                            AcceptsReturn="True"
                            AcceptsTab="True"
                            TextWrapping="NoWrap"
                            VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Auto"
                            MinHeight="400"
                            Background="{DynamicResource ControlFillColorDefaultBrush}"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="8" />
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="images.nss">
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Auto">
                        <TextBox
                            x:Name="_imagesNssTextBox"
                            FontFamily="Consolas, Courier New"
                            FontSize="12"
                            AcceptsReturn="True"
                            AcceptsTab="True"
                            TextWrapping="NoWrap"
                            VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Auto"
                            MinHeight="400"
                            Background="{DynamicResource ControlFillColorDefaultBrush}"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="8" />
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="modify.nss">
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Auto">
                        <TextBox
                            x:Name="_modifyNssTextBox"
                            FontFamily="Consolas, Courier New"
                            FontSize="12"
                            AcceptsReturn="True"
                            AcceptsTab="True"
                            TextWrapping="NoWrap"
                            VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Auto"
                            MinHeight="400"
                            Background="{DynamicResource ControlFillColorDefaultBrush}"
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="8" />
                    </ScrollViewer>
                </TabItem>
            </TabControl>
        </wpfui:CardControl>

        <StackPanel
            Grid.Row="2"
            Margin="20"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <wpfui:Button
                x:Name="_saveButton"
                MinWidth="120"
                Margin="0,0,8,0"
                Click="SaveButton_Click"
                Content="保存" />
            <wpfui:Button
                x:Name="_restartExplorerButton"
                MinWidth="140"
                Margin="0,0,8,0"
                Click="RestartExplorerButton_Click"
                Content="重启资源管理器" />
            <wpfui:Button
                x:Name="_closeButton"
                MinWidth="120"
                Click="CloseButton_Click"
                Content="{x:Static resources:Resource.Close}" />
        </StackPanel>
    </Grid>
</wpfui:UiWindow>

